Name:Maintenance Droid
ManaCost:W U
Types:Artifact Creature Droid
PT:1/2

A:AB$ ChooseCard | Cost$ T | Choices$ Card.YouOwn+counters_GE1_REPAIR | ChoiceZone$ Graveyard | TgtPrompt$ Choose a card you own with a repair counter on it | RememberChosen$ True | SubAbility$ DBChoice | SpellDescription$ Choose target card you own with a repair counter on it. You may remove a repair counter from it or put another repair counter on it.
SVar:DBChoice:DB$ GenericChoice | Choices$ AddRepair,RemoveRepair | Defined$ You | ChoiceDescription$ You may remove a repair counter from it or put another repair counter on it.
SVar:AddRepair:DB$ PutCounter | Defined$ Remembered | CounterType$ REPAIR | CounterNum$ 1 | SpellDescription$ You may put another repair counter on it.
SVar:RemoveRepair:DB$ RemoveCounter | Defined$ Remembered | CounterType$ REPAIR | CounterNum$ 1 | SpellDescription$ You may remove a repair counter from it.

T:Mode$ ChangesZone | Origin$ Battlefield | Destination$ Graveyard | ValidCard$ Card.Self | Execute$ TrigRepair | TriggerDescription$ When CARDNAME dies, put four repair counters on it.
SVar:TrigRepair:DB$ PutCounter | CounterType$ REPAIR | CounterNum$ 4 | Defined$ TriggeredCard

T:Mode$ Phase | Phase$ Upkeep | ValidPlayer$ You | ValidCard$ Card.Self+inGraveyard | CheckSVar$ RepairCount | SVarCompare$ GE1 | Execute$ TrigRemoveRepair | TriggerDescription$ At the beginning of your upkeep, if CARDNAME is in your graveyard with repair counters, remove a repair counter.
SVar:RepairCount:Count$CardCounters.REPAIR
SVar:TrigRemoveRepair:DB$ RemoveCounter | CounterType$ REPAIR | CounterNum$ 1 | Defined$ Self

T:Mode$ CounterRemoved | TriggerZones$ Graveyard | ValidCard$ Card.Self | CounterType$ REPAIR | NewCounterAmount$ 0 | Execute$ DBCast | TriggerDescription$ When the last repair counter is removed, you may cast CARDNAME until end of turn.
SVar:DBCast:DB$ Effect | StaticAbilities$ STPlay | ForgetOnMoved$ Graveyard | RememberObjects$ Self | Duration$ EndOfTurn
SVar:STPlay:Mode$ Continuous | MayPlay$ True | Affected$ Card.IsRemembered | AffectedZone$ Graveyard | Description$ Until end of turn, you may play EFFECTSOURCE.

Oracle:{T}: Choose target card you own with a repair counter on it. You may remove a repair counter from it or put another repair counter on it.\nRepair 4 (When this creature dies, put four repair counters on it. At the beginning of your upkeep, remove a repair counter. Whenever the last is removed, you may cast it from your graveyard until end of turn.)
